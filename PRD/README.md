# Flr Product Requirement Document



## 前言

这是`Flr`的当前核心逻辑版本下的产品需求文档，用于记录经项目组成员讨论后，认为需要在`Flr`工具的系列版本（[CLI版本](https://github.com/Fly-Mix/flr-cli)、[VSCode Extension版本](https://github.com/Fly-Mix/flr-vscode-extension)、[Android Studio Plugin版本](https://github.com/Fly-Mix/flr-as-plugin)）上都实现的需求（主要以优化需求和HotFix需求为主）。这些需求按照决定的时间倒序列出，即越新的越在前面。

需求的开发状态有未开始、开发中、开发完成、无法实现四种状态，当需求处于不同状态时，其title前面会带有不同的emoji标记：

- 未开始：无任何emoji标记
- 开发中：❇️
- 开发完成：✅
- 无法实现：❎

下面将会一一列举当前核心逻辑版本下的产品需求。



## ❇️PR-4：统一资源声明的顺序

- “图片资源的声明数组”在“文本资源的声明数组”前面
- “资源的声明数组”按照按照字典顺序升序排列（一般使用开发语言提供的默认的sort算法即可）



## ❇️PR-3：统一 pubspec.yaml 的缩进

统一设置缩进为2个空格。



注：此PR仅`flr-cli`需要实现。



## ❇️PR-2：更改 flr 配置的版本信息和检测逻辑

> **需求背景：**
>
> 当前在`pubspec.yaml`中存放的flr配置的版本信息为flr工具的版本号：
>
> ```yaml
> ...
> flr:
>     version: 0.2.3
>     assets:
> ```
>
> 在团队成员没有统一使用某一个版本的flr工具时（如统一使用 `flr-cli`），这个版本号传递的信息将会导致错乱的，如A成员使用`flr-cli`初始化工程后，`version`记录的是`flr-cli`工具的版本号，B成员在使用`flr-as-plugin`时，`flr-as-plugin`将会读取错误的工具版本信息，然后导致抛出警告。
>
> 
>
> 为此，工具版本信息`version`将会废弃掉，改为使用核心逻辑版本信息`core_version`代替。这样即使团队成员使用不同的flr工具，只要它们实现的核心逻辑版本一致，那就不需要抛出版本不一致的警告。



1. 废弃工具版本信息`version`字段

2. 使用核心逻辑版本信息`core_version`代替，值为：`1.0.0`

   ```yaml
   ...
   flr:
     core-version: 1.0.0
     assets:
   ```

   

3. 版本信息一致性的检测逻辑由‘“检测工具版本一致性”改为“检测工具的核心逻辑版本一致性”



## ❇️PR-1：统一 r.g.dart 生成的内容

1. 头部注释统一如下：

   ```dart
   // IT IS GENERATED BY FLR - DO NOT MODIFY BY HAND
   // YOU CAN GET MORE DETAILS ABOUT FLR FROM:
   // - https://github.com/Fly-Mix/flr-cli
   // - https://github.com/Fly-Mix/flr-vscode-extension
   // - https://github.com/Fly-Mix/flr-as-plugin
   //
   
   ```

   

2. 头文件统一如下：

   ```dart
   // ignore: unused_import
   import 'package:flutter/widgets.dart';
   // ignore: unused_import
   import 'package:flutter/services.dart' show rootBundle;
   // ignore: unused_import
   import 'package:path/path.dart' as path;
   // ignore: unused_import
   import 'package:flutter_svg/flutter_svg.dart';
   // ignore: unused_import
   import 'package:r_dart_library/asset_svg.dart';
   ```

   